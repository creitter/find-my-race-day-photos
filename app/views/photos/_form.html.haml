:javascript

  Dropzone.options.myAwesomeDropzone = {
    paramName: "file", // The name that will be used to transfer the file
    maxFilesize: 3, // MB
    uploadMultiple: true
  };
  var auto_discover  = "#{@state}" != "edit"
  Dropzone.autoDiscover = auto_discover
  
= form_for @photo, :html => { multipart: true, class: "dropzone", id: "my-awesome-dropzone" } do |f|

  - if @photo.errors.any?
    #error_explanation
      %h2= "#{pluralize(@photo.errors.count, "error")} prohibited this photo from being saved:"
      %ul
        - @photo.errors.full_messages.each do |msg|
          %li= msg

  .field
    = image_tag @photo.image.url(:thumb) if @photo.image.present?
  
  - if @state == :edit
    - if !current_user.guest? 
      .field
        .label Photographer
        = #{current_user.id}
    .field
      .label Where was this taken?
      = text_field :location, :description
    .field
      = f.label :tags
      = f.text_field :tags
    .field
      = f.label :note
      = f.text_field :note
    .actions
      = f.submit 'Save'
